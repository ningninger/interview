# OS

## 进程和线程

进程是对运行时程序的封装 (具有一定独立功能的程序关于某个数据集合上的一次运行活动), 是系统进行**资源调度和分配的基本单位**

线程是进程的一个实体, 是**CPU调度和分派的基本单位**, 只拥有一点在运行中必不可少的资源(如程序计数器,一组寄存器和栈)

## 进程间通信

+ 管道
+ 信号 (signal)
+ 共享内存
+ 信号量
+ 套接字

## 死锁

两个或多个进程无限期的阻塞、相互等待的一种状态

+ 互斥 (资源不共享)
+ 占有并等待 (保持并等待)
+ 非抢占 (不剥夺)
+ 循环等待

## 分页分段

- 目的不同：分页是由于**系统管理的需要**而不是用户的需要，它是信息的物理单位；分段的目的是为了能更好地**满足用户的需要**，它是信息的逻辑单位，它含有一组其意义相对完整的信息；
- 大小不同：**页的大小固定且由系统决定**，而段的长度却不固定，由其所完成的功能决定；
- 地址空间不同： **段向用户提供二维地址空间**；**页向用户提供的是一维地址空间**；
- 信息共享：段是信息的逻辑单位，便于存储保护和信息的共享，页的保护和共享受到限制；
- 内存碎片：页式存储管理的优点是没有**外碎片**（因为页的大小固定），但会产生**内碎片**（一个页可能填充不满）；而段式管理的优点是没有内碎片（因为段大小可变，改变段大小来消除内碎片）。但段换入换出时，会产生外碎片（比如4k的段换5k的段，会产生1k的外碎片）。

## 同步机制

+ 信号量
+ 条件变量
+ 事件
+ 原子操作
+ 锁
+ 管程: 将共享变量和对它们的操作集中在一个模块中，操作系统或并发程序就由这样的模块构成。这样模块之间联系清晰，便于维护和修改，易于保证正确性。

## 虚拟内存

虚拟内存允许执行进程不必完全在内存中。

每个进程拥有独立的地址空间，这个空间被分为大小相等的多个块，称为页(Page)，每个页都是一段连续的地址。

这些页被映射到物理内存，但并不是所有的页都必须在内存中才能运行程序。

当程序引用到一部分在物理内存中的地址空间时，由硬件立刻进行必要的**映射**；当程序引用到一部分不在物理内存中的地址空间时，由**操作系统负责将缺失的部分装入物理内存并重新执行失败的命令** (缺页异常)。

这样，对于进程而言，逻辑上似乎有很大的内存空间，实际上其中一部分对应物理内存上的一块(称为帧，通常页和帧大小相等)，还有一些没加载在内存中的对应在硬盘上。

好处

+ 在内存中可以保留多个进程，系统并发度提高
+ **更大的地址空间**, **保护和隔离**, **简化编程**

## 页面置换算法

+ FIFO
+ LRU: 最近最少用
+ 随机
+ LFU(最少使用), clock, NRU
+ OPT: 理论最优, 实际最晚使用

